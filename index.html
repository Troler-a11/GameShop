<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELITE GAME STORE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --bg: #020617; --accent: #1e293b; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; overflow-x: hidden; }
        .header-font { font-family: 'Orbitron', sans-serif; }
        
        .filter-btn { 
            position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--accent); overflow: hidden;
        }
        .filter-btn::after {
            content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px;
            background: var(--neon); transition: 0.3s; transform: translateX(-50%);
        }
        .filter-btn.active { border-color: var(--neon); color: var(--neon); background: rgba(0, 242, 255, 0.05); transform: translateY(-2px); }
        .filter-btn.active::after { width: 80%; }
        .filter-btn:active { transform: scale(0.95); }

        .premium-card { 
            background: linear-gradient(145deg, #0f172a, #020617);
            border: 1px solid #1e293b; transition: 0.4s;
        }
        .premium-card:hover { border-color: var(--neon); transform: translateY(-5px); box-shadow: 0 10px 30px -10px rgba(0, 242, 255, 0.2); }
        
        .modal-blur { backdrop-filter: blur(12px); background: rgba(2, 6, 23, 0.8); }
        .input-field { background: #0f172a; border: 1px solid #1e293b; transition: 0.3s; }
        .input-field:focus { border-color: var(--neon); outline: none; box-shadow: 0 0 10px rgba(0, 242, 255, 0.1); }
        
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 10px; }
    </style>
</head>
<body class="pb-20">

    <header class="sticky top-0 z-[100] border-b border-slate-800 bg-slate-950/80 backdrop-blur-md p-4">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="header-font text-xl font-black tracking-tighter">GAME<span class="text-cyan-400">STORE</span></h1>
            <div id="user-nav" class="flex gap-4 items-center">
                <button onclick="toggleProfile()" class="w-10 h-10 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center">
                    <span class="text-[10px] font-bold">BY</span>
                </button>
            </div>
        </div>
    </header>

    <div class="bg-slate-900/30 border-b border-slate-800 py-6 overflow-x-auto">
        <div id="game-filters" class="flex gap-3 px-6 mb-4 no-scrollbar">
            </div>
        <div id="cat-filters" class="flex gap-3 px-6 no-scrollbar">
            <button onclick="setFilter('cat', 'Всі')" class="filter-btn active px-6 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest">Всі категорії</button>
            <button onclick="setFilter('cat', 'Акаунт')" class="filter-btn px-6 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest">Акаунти</button>
            <button onclick="setFilter('cat', 'Валюта')" class="filter-btn px-6 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest">Валюта</button>
            <button onclick="setFilter('cat', 'Буст')" class="filter-btn px-6 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest">Прокачка</button>
        </div>
    </div>

    <main class="max-w-6xl mx-auto p-6 min-h-screen">
        <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </main>

    <div id="auth-modal" class="hidden fixed inset-0 z-[500] modal-blur flex items-center justify-center p-4">
        <div class="bg-slate-900 border border-slate-800 w-full max-w-md rounded-[2rem] p-8 shadow-2xl">
            <div id="auth-step-1">
                <h2 class="header-font text-xl text-center mb-2 uppercase">Реєстрація</h2>
                <p class="text-slate-500 text-[10px] text-center mb-8 uppercase tracking-widest">Введіть дані для створення ID</p>
                <div class="space-y-4">
                    <input type="text" id="reg-name" placeholder="ПІБ" class="input-field w-full p-4 rounded-2xl text-sm">
                    <input type="text" id="reg-tg" placeholder="Telegram @нік" class="input-field w-full p-4 rounded-2xl text-sm">
                    <input type="email" id="reg-email" placeholder="Email" class="input-field w-full p-4 rounded-2xl text-sm">
                    <button onclick="sendCode()" class="w-full bg-cyan-500 text-black font-black py-4 rounded-2xl uppercase text-xs tracking-widest hover:bg-cyan-400 transition">Отримати код</button>
                </div>
            </div>
            <div id="auth-step-2" class="hidden text-center">
                <h2 class="header-font text-xl mb-2 uppercase text-cyan-400">Підтвердження</h2>
                <p class="text-slate-400 text-xs mb-6">Код відправлено на вашу пошту. <br>Введіть 6 цифр + 1 велика літера.</p>
                <input type="text" id="verify-code" placeholder="Код (напр. 123456A)" class="input-field w-full p-4 rounded-2xl text-center tracking-[0.5em] font-bold mb-4">
                <p id="auth-error" class="text-red-500 text-[10px] mb-4 uppercase"></p>
                <button onclick="verifyCode()" class="w-full bg-white text-black font-black py-4 rounded-2xl uppercase text-xs">Увійти</button>
            </div>
        </div>
    </div>

    <div id="profile-view" class="hidden fixed inset-0 z-[450] bg-slate-950 p-6 overflow-y-auto">
        <div class="max-w-md mx-auto pt-10">
            <div class="text-center mb-10">
                <div class="w-24 h-24 bg-gradient-to-tr from-cyan-500 to-blue-600 rounded-3xl mx-auto mb-4 flex items-center justify-center text-3xl font-black shadow-lg shadow-cyan-500/20" id="prof-avatar">U</div>
                <h2 class="header-font text-2xl uppercase" id="prof-name">Користувач</h2>
                <p class="text-cyan-400 text-[10px] font-bold tracking-widest uppercase mb-2" id="prof-id">ID: 000000</p>
                <span class="px-4 py-1 bg-slate-800 rounded-full text-[9px] text-slate-400 uppercase font-black" id="prof-status">Клієнт</span>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-slate-900/50 p-4 rounded-2xl border border-slate-800">
                    <p class="text-[9px] text-slate-500 uppercase font-bold mb-1">Куплено</p>
                    <p class="text-xl font-black" id="prof-buys">0</p>
                </div>
                <div class="bg-slate-900/50 p-4 rounded-2xl border border-slate-800">
                    <p class="text-[9px] text-slate-500 uppercase font-bold mb-1">Продажі</p>
                    <p class="text-xl font-black text-slate-600">Soon</p>
                </div>
            </div>

            <div class="space-y-3 mb-10">
                <div class="flex justify-between p-4 bg-slate-900/30 rounded-xl border border-slate-800/50">
                    <span class="text-xs text-slate-400">Telegram</span>
                    <span class="text-xs font-bold" id="info-tg">@...</span>
                </div>
                <div class="flex justify-between p-4 bg-slate-900/30 rounded-xl border border-slate-800/50">
                    <span class="text-xs text-slate-400">Email</span>
                    <span class="text-xs font-bold" id="info-email">...</span>
                </div>
            </div>

            <button onclick="logout()" class="w-full py-4 text-red-500 font-black uppercase text-[10px] tracking-widest border border-red-500/20 rounded-2xl hover:bg-red-500/5 transition">Змінити обліковий запис</button>
            <button onclick="toggleProfile()" class="w-full py-4 text-slate-500 text-[9px] uppercase font-bold">Закрити профіль</button>
        </div>
    </div>
<script>
    // КОНФІГУРАЦІЯ
    const MY_ADMIN_EMAIL = "твій_email@gmail.com"; // ЗАМІНИ НА СВІЙ
    const games = ["Brawl Stars", "Standoff 2", "PUBG Mobile", "Roblox", "Free Fire", "Clash of Clans", "Genshin Impact", "Steam", "Clash Royale", "Valorant", "Mobile Legends"];
    
    let db = JSON.parse(localStorage.getItem('artem_db_v5')) || [];
    let currentUser = JSON.parse(localStorage.getItem('active_user')) || null;
    let authAttempts = JSON.parse(localStorage.getItem('auth_attempts')) || { count: 0, lastTime: 0 };
    let activeFilters = { game: 'Всі', cat: 'Всі' };

    // ІНІЦІАЛІЗАЦІЯ ФІЛТРІВ ТА ПАНЕЛІ
    const gFilterWrap = document.getElementById('game-filters');
    games.forEach(g => {
        gFilterWrap.innerHTML += `<button onclick="setFilter('game', '${g}')" class="filter-btn px-6 py-2 rounded-full text-[10px] uppercase font-bold tracking-widest bg-slate-900/50">${g}</button>`;
    });

    // ЛОГІКА АВТОРИЗАЦІЇ (EMAIL + CODE)
    function checkAuth() {
        if (!currentUser) document.getElementById('auth-modal').classList.remove('hidden');
        else updateProfileUI();
    }

    function sendCode() {
        const email = document.getElementById('reg-email').value;
        const name = document.getElementById('reg-name').value;
        if (!email.includes('@') || name.length < 3) return alert("Заповніть дані коректно!");

        // Імітація відправки. Код: 123456 + 'A' (як ти просив)
        console.log("System: Code sent to " + email);
        document.getElementById('auth-step-1').classList.add('hidden');
        document.getElementById('auth-step-2').classList.remove('hidden');
    }

    function verifyCode() {
        const now = Date.now();
        // Перевірка бану на 2 години
        if (authAttempts.count >= 12 && (now - authAttempts.lastTime) < 7200000) {
            const waitMin = Math.ceil((7200000 - (now - authAttempts.lastTime)) / 60000);
            document.getElementById('auth-error').innerText = `Забагато спроб! Зачекайте ${waitMin} хв.`;
            return;
        }

        const code = document.getElementById('verify-code').value;
        if (code === "123456A") {
            // Успіх
            currentUser = {
                id: Math.floor(100000 + Math.random() * 899999),
                name: document.getElementById('reg-name').value,
                tg: document.getElementById('reg-tg').value,
                email: document.getElementById('reg-email').value,
                buys: 0,
                isAdmin: document.getElementById('reg-email').value === MY_ADMIN_EMAIL
            };
            localStorage.setItem('active_user', JSON.stringify(currentUser));
            authAttempts = { count: 0, lastTime: 0 };
            localStorage.setItem('auth_attempts', JSON.stringify(authAttempts));
            location.reload();
        } else {
            // Помилка
            authAttempts.count++;
            authAttempts.lastTime = now;
            localStorage.setItem('auth_attempts', JSON.stringify(authAttempts));
            document.getElementById('auth-error').innerText = `Невірний код! Спроб: ${authAttempts.count}/12`;
        }
    }

    // КЕРУВАННЯ ТОВАРАМИ
    function render() {
        const grid = document.getElementById('products-grid');
        const filtered = db.filter(p => (activeFilters.game === 'Всі' || p.game === activeFilters.game) && (activeFilters.cat === 'Всі' || p.cat === activeFilters.cat));
        
        grid.innerHTML = filtered.map(p => `
            <div class="premium-card rounded-[2rem] p-6 relative">
                <div class="absolute top-4 left-4 z-10 bg-cyan-500 text-black text-[8px] font-black px-3 py-1 rounded-full uppercase">${p.cat}</div>
                ${currentUser?.isAdmin ? `<button onclick="deleteItem(${p.id})" class="absolute top-4 right-4 z-20 bg-red-600/20 hover:bg-red-600 text-red-500 hover:text-white w-8 h-8 rounded-full transition text-xs">×</button>` : ''}
                <div class="w-full h-48 bg-slate-800 rounded-2xl mb-5 overflow-hidden border border-slate-700">
                    <img src="${p.img || ''}" class="w-full h-full object-cover">
                </div>
                <div class="flex justify-between items-start mb-2">
                    <div>
                        <p class="text-[9px] text-cyan-400 font-bold uppercase tracking-tighter">${p.game}</p>
                        <h3 class="font-black text-xl leading-tight uppercase">${p.title}</h3>
                    </div>
                    <p class="text-2xl font-black text-white">$${p.price}</p>
                </div>
                <p class="text-slate-500 text-xs mb-6 line-clamp-2">${p.desc}</p>
                <button onclick="buyAction(${p.id})" class="w-full bg-slate-800 hover:bg-cyan-500 hover:text-black py-4 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all">Придбати</button>
            </div>
        `).join('');
    }

    function deleteItem(id) {
        if (!confirm("Видалити цей товар?")) return;
        db = db.filter(item => item.id !== id);
        localStorage.setItem('artem_db_v5', JSON.stringify(db));
        render();
    }

    function buyAction(id) {
        // Логіка "Успішної покупки"
        if (!currentUser) return checkAuth();
        currentUser.buys++;
        localStorage.setItem('active_user', JSON.stringify(currentUser));
        updateProfileUI();
        alert("Замовлення надіслано! Перевірте профіль.");
    }

    // ПРОФІЛЬ
    function updateProfileUI() {
        if (!currentUser) return;
        document.getElementById('prof-name').innerText = currentUser.name;
        document.getElementById('prof-id').innerText = `ID: ${currentUser.id}`;
        document.getElementById('prof-buys').innerText = currentUser.buys;
        document.getElementById('info-tg').innerText = currentUser.tg;
        document.getElementById('info-email').innerText = currentUser.email;
        document.getElementById('prof-avatar').innerText = currentUser.name[0].toUpperCase();
        
        if (currentUser.isAdmin) {
            const status = document.getElementById('prof-status');
            status.innerText = "ADMINISTRATOR";
            status.className = "px-4 py-1 bg-red-500/10 rounded-full text-[9px] text-red-500 uppercase font-black border border-red-500/20";
        }
    }

    function toggleProfile() {
        if (!currentUser) return checkAuth();
        document.getElementById('profile-view').classList.toggle('hidden');
    }

    function logout() {
        if (confirm("Вийти з акаунта?")) {
            localStorage.removeItem('active_user');
            location.reload();
        }
    }

    function setFilter(type, val) {
        activeFilters[type] = val;
        const btns = document.querySelectorAll(`#${type}-filters button`);
        btns.forEach(b => {
            if (b.innerText === val || (val === 'Всі' && b.innerText.includes('Всі'))) b.classList.add('active');
            else b.classList.remove('active');
        });
        render();
    }

    // Стартуємо систему
    checkAuth();
    render();
</script>
